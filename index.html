<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
			background-color: #d3d3d3; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ü–≤–µ—Ç */
			/* background-color: white;  –±–µ–ª—ã–π —Ü–≤–µ—Ç */
        }
        .button-container {
            display: flex;
            background-color: #add8e6; /* –ì–æ–ª—É–±–æ–π —Ü–≤–µ—Ç */
            padding: 10px;
            border-radius: 5px;
            margin-top: 5px;
			margin-bottom: 5px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å —Ç–µ–∫—É—â–∏–º —Å–ø–∏—Å–∫–æ–º */
        }
        .button {
            flex: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç —Ä–∞–≤–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
            margin: 5px;
            padding: 10px 15px;
            cursor: pointer;
            border: none;
            background-color: #ffffff; /* –ë–µ–ª—ã–π —Ñ–æ–Ω –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .button:hover {
            background-color: #e0e0e0; /* –¶–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }
        #currentList, #history {
            display: none;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #historyList button {
            display: block; /* –ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ –±—É–¥–µ—Ç –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ */
            margin: 5px 0; /* –û—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
            width: 100%; /* –ö–Ω–æ–ø–∫–∏ –∑–∞–Ω–∏–º–∞—é—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É */
        }
		#createNewListButton {
			width: 150px; /* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∂–µ–ª–∞–µ–º—É—é —à–∏—Ä–∏–Ω—É */
			height: 25px; /* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∂–µ–ª–∞–µ–º—É—é –≤—ã—Å–æ—Ç—É */
			padding: 5px 10px; /* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ—Ç—Å—Ç—É–ø—ã –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
			font-size: 12px; /* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ */
			flex: 0 0 auto; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ä–∞—Å—Ç—è–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ */
		}
		#createNewItemButton {
			width: 75px;
			height: 25px; /* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∂–µ–ª–∞–µ–º—É—é –≤—ã—Å–æ—Ç—É */
			padding: 5px 10px; /* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ—Ç—Å—Ç—É–ø—ã –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
			font-size: 12px; /* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ */
			flex: 0 0 auto; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ä–∞—Å—Ç—è–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ */
		}
		#currentListName {
            font-style: italic; /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É—Ä—Å–∏–≤ –¥–ª—è –∏–º–µ–Ω–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ */
        }
		#newItem {
            padding: 5px; /* –î–æ–±–∞–≤—å—Ç–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ */
            font-size: 14px; /* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ */
            flex: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë –¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
		}
		h1 {
			margin-bottom: 5px;
		}
		h2 {
			margin: 5px;
		}
		h3 {
			margin: 5px;
			padding: 10px;
		}
		.input-container {
            display: flex; /* –ò—Å–ø–æ–ª—å–∑—É–µ–º flexbox –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –∏ –ø–æ–ª—è –≤–≤–æ–¥–∞ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ */
            margin-top: 25px; /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ */
        }
		#itemsList li {
        margin-bottom: 10px; /* –£–≤–µ–ª–∏—á—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –±–æ–ª—å—à–µ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è */
        line-height: 1.5; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ—Ç—É —Å—Ç—Ä–æ–∫–∏ */
		}
		
		
		ul {
			list-style-type: none; /* –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã */
			padding: 0; /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã */
		}

		li {
			margin: 5px 0; /* –û—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Å–ø–∏—Å–∫–∞ */
			display: flex; /* –ò—Å–ø–æ–ª—å–∑—É–µ–º Flexbox –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è */
			align-items: center; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
		}

		button {
			width: 35px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
			height: 35px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */
			font-size: 14px; /* –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –ø–∏–∫—Ç–æ–≥—Ä–∞–º–º—ã */
			border: none; /* –£–±–∏—Ä–∞–µ–º —Ä–∞–º–∫—É */
			background: transparent; /* –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
			cursor: pointer; /* –£–∫–∞–∑–∞—Ç–µ–ª—å –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
			margin-right: 30px; /* –û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–æ–π –∏ —Ç–µ–∫—Å—Ç–æ–º */
		}

		button:hover {
			background-color: rgba(0, 0, 0, 0.1); /* –õ–µ–≥–∫–∏–π —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
		}

		.modal {
			display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
			position: fixed;
			z-index: 1;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			overflow: auto;
			background-color: rgb(0,0,0);
			background-color: rgba(0,0,0,0.4);
		}

		.modal-content {
			background-color: #fefefe;
			margin: 15% auto;
			padding: 20px;
			border: 1px solid #888;
			width: 80%;
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
		}

		.modal-button-container {
            display: flex;
            background-color: #ffffff; 
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
			margin-bottom: 5px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å —Ç–µ–∫—É—â–∏–º —Å–ø–∏—Å–∫–æ–º */
		}

		.modal-button {
            flex: 1; /* –ó–∞–Ω–∏–º–∞–µ—Ç —Ä–∞–≤–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
            margin: 5px;
            padding: 10px 15px;
            cursor: pointer;
            border: 1px solid #888;
            background-color: #ffffff; /* –ë–µ–ª—ã–π —Ñ–æ–Ω –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
            border-radius: 5px;
            transition: background-color 0.3s;
		}

    </style>
</head>
<body>

    <h1>–°–ø–∏—Å–∫–∏ –ø–æ–∫—É–ø–æ–∫ –∏ –¥–µ–ª</h1>
    <div class="button-container">
        <button class="button" onclick="showCurrentList()">–¢–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫</button>
        <button class="button" onclick="showHistory()">–ò—Å—Ç–æ—Ä–∏—è —Å–ø–∏—Å–∫–æ–≤</button>
    </div>

    <div id="currentList">
        <div class="header">
            <h2>–¢–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫: </h2>
            <button class="button" id="createNewListButton" onclick="createNewList()">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ø–∏—Å–æ–∫</button>
        </div>
		<h3 id="currentListName"></h3> <!-- –≠–ª–µ–º–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–º–µ–Ω–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ -->
        <ul id="itemsList">
            <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ -->
        </ul>
		<div class="input-container">
            <input type="text" id="newItem" placeholder="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é">
            <button class="button" id="createNewItemButton" onclick="addItem()">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
    </div>

    <div id="history">
        <h2>–ò—Å—Ç–æ—Ä–∏—è —Å–ø–∏—Å–∫–æ–≤</h2>
        <div id="historyList">
            <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–Ω–æ–ø–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ —Å–ø–∏—Å–∫–æ–≤ -->
        </div>
    </div>
	
	<div id="customPrompt" class="modal">
    <div class="modal-content">
        <h2>–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–ø–∏—Å–∫–∞:</h2>
        <input type="text" id="listNameInput" placeholder="YYYY_MM_DD" style="width: 100%; font-size: 14px; margin-top: 25px;">
        <div class="modal-button-container">
            <button class="modal-button" onclick="submitListName()">–û–ö</button>
            <button class="modal-button" onclick="closePrompt()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
	</div>
	<div id="confirmDeleteModal" class="modal">
		<div class="modal-content">
			<h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h2>
			<p id="deleteItemMessage">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç?</p>
			<div class="modal-button-container">
				<button class="modal-button" id="confirmDeleteButton">–û–ö</button>
				<button class="modal-button" onclick="closeDeletePrompt()">–û—Ç–º–µ–Ω–∞</button>
			</div>
		</div>
	</div>
	<div id="confirmDeleteListModal" class="modal">
    <div class="modal-content">
        <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞</h2>
        <p id="deleteListMessage">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫?</p>
        <div class="modal-button-container">
            <button class="modal-button" id="confirmDeleteListButton">–û–ö</button>
            <button class="modal-button" onclick="closeDeleteListPrompt()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
	</div>
	
    <script>
	
	
	let currentListName = ''; // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
	let itemToDelete = null; // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å
	
	
function loadHistoryListsFT() {
    const xhr = new XMLHttpRequest();
    xhr.open('POST', 'https://linklocal.42web.io/api/lists.php', true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onload = function() {
        if (xhr.status === 200) {
            const lists = JSON.parse(xhr.responseText);
            const historyList = document.getElementById('historyList'); // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
            historyList.innerHTML = ''; // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–ø–∏—Å–æ–∫
            currentListName = getCurrentDate(); // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY_MM_DD
            let currentListExists = false; // –§–ª–∞–≥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞

            console.log('–¢–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫:', currentListName); // –û—Ç–ª–∞–¥–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

            lists.forEach(function(list) {
                // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∏ –∫–Ω–æ–ø–∫–∏ "–∫–æ—Ä–∑–∏–Ω–∞"
                const listContainer = document.createElement('div');
                listContainer.style.display = 'flex'; // –ò—Å–ø–æ–ª—å–∑—É–µ–º flexbox –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è
                listContainer.style.alignItems = 'center'; // –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏

                // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É "–∫–æ—Ä–∑–∏–Ω–∞"
                const deleteButton = document.createElement('button');
                deleteButton.innerHTML = 'üóëÔ∏è'; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç–º–æ–¥–∑–∏ –¥–ª—è –∑–Ω–∞—á–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
                deleteButton.className = 'delete-button'; // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
                deleteButton.style.width = '40px'; // –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–∫–æ—Ä–∑–∏–Ω–∞"
                deleteButton.style.height = '40px'; // –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤—ã—Å–æ—Ç—É

                deleteButton.onclick = function() {
                    const listName = list.name; // –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Å–ø–∏—Å–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
                    console.log('–£–¥–∞–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞:', listName);

					const confirmation = confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫ "${listName}"?`);
					if (!confirmation) {
						return; // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "–û—Ç–º–µ–Ω–∞", –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
					}

                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º AJAX-–∑–∞–ø—Ä–æ—Å –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞
                    const xhrDelete = new XMLHttpRequest();
                    xhrDelete.open('POST', 'https://linklocal.42web.io/api/lists.php', true);
                    xhrDelete.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                    xhrDelete.onload = function() {
                        if (xhrDelete.status === 200) {
                            const response = JSON.parse(xhrDelete.responseText);
                            if (response.success) {
                                //alert(response.success); // –£–≤–µ–¥–æ–º–ª—è–µ–º –æ–± —É—Å–ø–µ—à–Ω–æ–º —É–¥–∞–ª–µ–Ω–∏–∏
                                loadHistoryLists(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                            } else {
                                //alert(response.error); // –£–≤–µ–¥–æ–º–ª—è–µ–º –æ–± –æ—à–∏–±–∫–µ
                            }
                        } else {
                            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞:', xhrDelete.statusText);
                        }
                    };
                    xhrDelete.send('action=delete&name=' + encodeURIComponent(listName)); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–º—è —Å–ø–∏—Å–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
                };

                const button = document.createElement('button'); // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É
                button.textContent = list.name; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
                button.className = 'button'; // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
                button.style.width = '100px'; // –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–ø–∏—Å–∫–∞
                button.style.height = '40px'; // –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤—ã—Å–æ—Ç—É

                // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–ø–∏—Å–∫–∞
                const contentDiv = document.createElement('div');
                contentDiv.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏
                button.onclick = function() {
                    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
                    if (contentDiv.style.display === 'none') {
                        contentDiv.style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                        viewList(list.name, contentDiv); // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ø–∏—Å–∫–∞
                    } else {
                        contentDiv.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                    }
                };

                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                listContainer.appendChild(deleteButton); // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–∫–æ—Ä–∑–∏–Ω–∞"
                listContainer.appendChild(button); // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Å–ø–∏—Å–∫–∞
                historyList.appendChild(listContainer); // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Å–ø–∏—Å–æ–∫
                historyList.appendChild(contentDiv); // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ª–∏ –∏–º—è —Å–ø–∏—Å–∫–∞ —Å —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–æ–π
                if (list.name === currentListName) {
                    currentListExists = true; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥, –µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω
                }
            });

            // –ï—Å–ª–∏ —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ
            if (currentListExists) {
                showCurrentList(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫
                loadCurrentList(); // –ó–∞–≥—Ä—É–∂–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
            }
        } else {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–ø–∏—Å–∫–æ–≤:', xhr.statusText);
        }
    };
    xhr.send('action=getlists');
}

	
function loadHistoryLists() {
    const xhr = new XMLHttpRequest();
    xhr.open('POST', 'https://linklocal.42web.io/api/lists.php', true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onload = function() {
        if (xhr.status === 200) {
            const lists = JSON.parse(xhr.responseText);
            const historyList = document.getElementById('historyList'); // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
            historyList.innerHTML = ''; // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–ø–∏—Å–æ–∫
            let currentListExists = false; // –§–ª–∞–≥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞

            console.log('–¢–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫:', currentListName); // –û—Ç–ª–∞–¥–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

            lists.forEach(function(list) {
                // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∏ –∫–Ω–æ–ø–∫–∏ —Å–ø–∏—Å–∫–∞
                const listContainer = document.createElement('div');
                listContainer.style.display = 'flex'; // –ò—Å–ø–æ–ª—å–∑—É–µ–º flexbox –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è
                listContainer.style.alignItems = 'center'; // –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
                listContainer.style.justifyContent = 'space-between'; // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Å–ø–∏—Å–∫–∞

                // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É "–∫–æ—Ä–∑–∏–Ω–∞"
                const deleteButton = document.createElement('button');
                deleteButton.innerHTML = 'üóëÔ∏è'; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç–º–æ–¥–∑–∏ –¥–ª—è –∑–Ω–∞—á–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
                deleteButton.className = 'delete-button'; // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
                deleteButton.style.width = '40px'; // –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–∫–æ—Ä–∑–∏–Ω–∞"
                deleteButton.style.height = '40px'; // –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤—ã—Å–æ—Ç—É

				deleteButton.onclick = function() {
					const listName = list.name; // –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Å–ø–∏—Å–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
					console.log('–£–¥–∞–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞:', listName);

					// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
					const modal = document.getElementById('confirmDeleteListModal');
					const deleteListMessage = document.getElementById('deleteListMessage');
					const confirmDeleteListButton = document.getElementById('confirmDeleteListButton');

					deleteListMessage.textContent = `–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫ "${listName}"?`;
					modal.style.display = "block";

					// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–û–ö"
					confirmDeleteListButton.onclick = function() {
						// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º AJAX-–∑–∞–ø—Ä–æ—Å –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞
						const xhrDelete = new XMLHttpRequest();
						xhrDelete.open('POST', 'https://linklocal.42web.io/api/lists.php', true);
						xhrDelete.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
						xhrDelete.onload = function() {
							if (xhrDelete.status === 200) {
								const response = JSON.parse(xhrDelete.responseText);
								if (response.success) {
									loadHistoryLists(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
								} else {
									//alert(response.error); // –£–≤–µ–¥–æ–º–ª—è–µ–º –æ–± –æ—à–∏–±–∫–µ
								}
							} else {
								console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞:', xhrDelete.statusText);
							}
						};
						xhrDelete.send('action=delete&name=' + encodeURIComponent(listName)); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–º—è —Å–ø–∏—Å–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
						modal.style.display = "none"; // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
					};
				};

                const button = document.createElement('button'); // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É
                button.textContent = list.name; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
                button.className = 'button'; // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
                button.style.width = '100px'; // –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–ø–∏—Å–∫–∞
                button.style.height = '40px'; // –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤—ã—Å–æ—Ç—É

                // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–∏—Å–∫–∞
                const searchButton = document.createElement('button');
                searchButton.innerHTML = 'üîé'; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç–º–æ–¥–∑–∏ –¥–ª—è –∑–Ω–∞—á–∫–∞ –ø–æ–∏—Å–∫–∞
                searchButton.className = 'search-button'; // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
                searchButton.style.width = '40px'; // –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–æ–∏—Å–∫–∞
                searchButton.style.height = '40px'; // –ó–∞–¥–∞–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤—ã—Å–æ—Ç—É

				searchButton.onclick = function() {
					//alert(list.name); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è —Å–ø–∏—Å–∫–∞
					currentListName = list.name; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–º—è —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
					showCurrentList(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫
					loadCurrentList(); // –ó–∞–≥—Ä—É–∂–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
				};

                // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–ø–∏—Å–∫–∞
                const contentDiv = document.createElement('div');
                contentDiv.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏
                button.onclick = function() {
                    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
                    if (contentDiv.style.display === 'none') {
                        contentDiv.style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                        viewList(list.name, contentDiv); // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ø–∏—Å–∫–∞
                    } else {
                        contentDiv.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                    }
                };

                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                listContainer.appendChild(deleteButton); // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–∫–æ—Ä–∑–∏–Ω–∞"
                listContainer.appendChild(button); // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Å–ø–∏—Å–∫–∞
                listContainer.appendChild(searchButton); // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–∏—Å–∫–∞
                historyList.appendChild(listContainer); // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Å–ø–∏—Å–æ–∫
                historyList.appendChild(contentDiv); // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ª–∏ –∏–º—è —Å–ø–∏—Å–∫–∞ —Å —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–æ–π
                if (list.name === currentListName) {
                    currentListExists = true; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥, –µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω
                }
            });

        } else {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–ø–∏—Å–∫–æ–≤:', xhr.statusText);
        }
    };
    xhr.send('action=getlists');
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
function closeDeleteListPrompt() {
    const modal = document.getElementById('confirmDeleteListModal');
    modal.style.display = "none"; // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
window.onclick = function(event) {
    const modal = document.getElementById('confirmDeleteListModal');
    if (event.target === modal) {
        closeDeleteListPrompt(); // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    }
};


function loadCurrentList() {
    const xhr = new XMLHttpRequest();
    xhr.open('POST', 'https://linklocal.42web.io/api/lists.php', true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onload = function() {
        if (xhr.status === 200) {
            const items = JSON.parse(xhr.responseText);
            const itemsList = document.getElementById('itemsList');
            const currentListNameElement = document.getElementById('currentListName');
            currentListNameElement.textContent = `${currentListName}`;
            itemsList.innerHTML = ''; // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–ø–∏—Å–æ–∫

            items.forEach(function(item) {
                const li = document.createElement('li');
                li.style.display = 'flex';

                // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É —Å –ø–∏–∫—Ç–æ–≥—Ä–∞–º–º–æ–π ‚ùå
                const button = document.createElement('button');
                button.textContent = '‚ùå'; // –ü–∏–∫—Ç–æ–≥—Ä–∞–º–º–∞ –∫–Ω–æ–ø–∫–∏
                button.style.width = '35px'; // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞
                button.style.height = '35px'; // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞
                button.style.fontSize = '20px'; // –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –ø–∏–∫—Ç–æ–≥—Ä–∞–º–º—ã
                button.style.border = 'none'; // –£–±–∏—Ä–∞–µ–º —Ä–∞–º–∫—É
                button.style.background = 'transparent'; // –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω
                button.style.cursor = 'pointer'; // –£–∫–∞–∑–∞—Ç–µ–ª—å –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
                button.onclick = function(event) {
                    event.stopPropagation(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—Å–ø–ª—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏—è –∫–ª–∏–∫–∞
                    showDeletePrompt(item); // –û—Ç–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
                };

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è buy
                li.onclick = function() {
                    toggleBuy(item.name, item.items, item.buy); // –ü–µ—Ä–µ–¥–∞–µ–º –∏–º—è —Å–ø–∏—Å–∫–∞, –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ buy
                };

                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
                li.appendChild(button);

                // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç span –¥–ª—è —Ç–µ–∫—Å—Ç–∞
                const textNode = document.createElement('span');
                textNode.textContent = item.items;

                if (item.buy === 1) {
                    textNode.style.textDecoration = 'line-through'; // –ó–∞—á–µ—Ä–∫–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç
                }

                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤ —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
                li.appendChild(textNode);
                itemsList.appendChild(li);
            });
        } else {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞:', xhr.statusText);
        }
    };
    xhr.send('action=update&name=' + encodeURIComponent(currentListName)); // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
function closeDeletePrompt() {
    document.getElementById("confirmDeleteModal").style.display = "none"; // –°–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
    itemToDelete = null; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞
document.getElementById("confirmDeleteButton").onclick = function() {
    if (itemToDelete) {
        // –õ–æ–≥–∏–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞
        const deleteXhr = new XMLHttpRequest();
        deleteXhr.open('POST', 'https://linklocal.42web.io/api/lists.php', true);
        deleteXhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        deleteXhr.onload = function() {
            if (deleteXhr.status === 200) {
                const response = JSON.parse(deleteXhr.responseText);
                console.log(response.success || response.error);
                // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
                loadCurrentList();
            } else {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞:', deleteXhr.statusText);
            }
        };
        deleteXhr.send('action=delitem&name=' + encodeURIComponent(currentListName) + '&item=' + encodeURIComponent(itemToDelete.items));
        closeDeletePrompt(); // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
    }
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
function showDeletePrompt(item) {
    itemToDelete = item; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å
    document.getElementById("deleteItemMessage").textContent = `–£–¥–∞–ª—è–µ–º "${item.items}"?`; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    closePrompt(); // –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ –¥–ª—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏, –µ—Å–ª–∏ –æ–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ
    document.getElementById("confirmDeleteModal").style.display = "block"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
}

        function getCurrentDate() {
            const date = new Date();
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0'); // –ú–µ—Å—è—Ü—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 0
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}_${month}_${day}`; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY_MM_DD
        }

        // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            loadHistoryListsFT(); // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å–ø–∏—Å–∫–æ–≤ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
			setInterval(loadCurrentList, 10000);
        };

        function showCurrentList() {
            document.getElementById('currentList').style.display = 'block';
            document.getElementById('history').style.display = 'none';
            loadCurrentList(); // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫
        }

        function showHistory() {
            document.getElementById('currentList').style.display = 'none';
            document.getElementById('history').style.display = 'block';
            loadHistoryLists(); // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å–ø–∏—Å–∫–æ–≤
        }



		function addItem() {
			const newItem = document.getElementById('newItem').value;
			if (newItem) {
				const xhr = new XMLHttpRequest();
				xhr.open('POST', 'https://linklocal.42web.io/api/lists.php', true);
				xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); // –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ application/x-www-form-urlencoded
				xhr.onload = function() {
					if (xhr.status === 200) {
						const response = JSON.parse(xhr.responseText);
						if (response.success) {
							loadCurrentList(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫
							document.getElementById('newItem').value = ''; // –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞
						} else {
							console.error('–û—à–∏–±–∫–∞:', response.error);
						}
					} else {
						console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞:', xhr.statusText);
					}
				};
				const listName = currentListName; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∫–∞–∫ –∏–º—è —Å–ø–∏—Å–∫–∞
				const data = `action=newitem&name=${encodeURIComponent(listName)}&item=${encodeURIComponent(newItem)}&buy=0`;
				xhr.send(data); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ x-www-form-urlencoded
			}
		}

        function toggleBuy(name, item, currentBuyValue) {
            const newBuyValue = currentBuyValue === 1 ? 0 : 1; // –ú–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ buy
            const xhr = new XMLHttpRequest();
            xhr.open('POST', 'https://linklocal.42web.io/api/lists.php', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.onload = function() {
                if (xhr.status === 200) {
                    const response = JSON.parse(xhr.responseText);
                    if (response.success) {
                        loadCurrentList(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫
                    } else {
                        console.error('–û—à–∏–±–∫–∞:', response.error);
                    }
                } else {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è buy:', xhr.statusText);
                }
            };
            const listName = currentListName; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∫–∞–∫ –∏–º—è —Å–ø–∏—Å–∫–∞
            xhr.send(`action=togglebuy&name=${encodeURIComponent(listName)}&item=${encodeURIComponent(item)}&buy=${newBuyValue}`);
        }

		function createNewList() {
			const currentDate = getCurrentDate(); // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY_MM_DD
			document.getElementById("listNameInput").value = currentDate; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
			document.getElementById("customPrompt").style.display = "block"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
		}

		function closePrompt() {
			document.getElementById("customPrompt").style.display = "none"; // –°–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
		}

		function submitListName() {
			const newListName = document.getElementById("listNameInput").value; // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–æ–ª—è –≤–≤–æ–¥–∞
			if (newListName) { // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–º—è –Ω–µ –ø—É—Å—Ç–æ–µ
				currentListName = newListName; // –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –Ω–æ–≤–æ–µ –∏–º—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
				// alert(`–ò–º—è —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞: ${currentListName}`); // –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
				closePrompt(); // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
				showCurrentList(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫
				loadCurrentList(); // –ó–∞–≥—Ä—É–∂–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
			} else {
				//alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è —Å–ø–∏—Å–∫–∞."); // –£–≤–µ–¥–æ–º–ª—è–µ–º, –µ—Å–ª–∏ –∏–º—è –ø—É—Å—Ç–æ–µ
			}
		}

function viewList(listName, contentDiv) {
    const xhr = new XMLHttpRequest();
    xhr.open('POST', 'https://linklocal.42web.io/api/lists.php', true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onload = function() {
        if (xhr.status === 200) {
            const items = JSON.parse(xhr.responseText);
            contentDiv.innerHTML = ''; // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–ø–∏—Å–æ–∫
            const ul = document.createElement('ul'); // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
            items.forEach(function(item) {
                const li = document.createElement('li');
                li.textContent = item.items; // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –ø–æ–ª–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è 'items'
                if (item.buy === 1) {
                    li.style.textDecoration = 'line-through'; // –ó–∞—á–µ—Ä–∫–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç
                }
                li.style.paddingLeft = '55px'; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ –≤ 20 –ø–∏–∫—Å–µ–ª–µ–π
                // –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ li.style.marginLeft = '20px'; –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –æ—Ç—Å—Ç—É–ø–∞
                ul.appendChild(li); // –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –≤ ul
            });
            contentDiv.appendChild(ul); // –î–æ–±–∞–≤–ª—è–µ–º ul –≤ contentDiv
        } else {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞:', xhr.statusText);
        }
    };
    xhr.send('action=update&name=' + encodeURIComponent(listName));
}
    </script>

</body>
</html>
                       
